(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();const p=u("input.bpm"),b=u("input.progress"),B=u("select"),y=u("button#start"),h=u("button#stop"),x=u("button#reset");function u(r){const e=document.querySelector(r);if(!e)throw new Error(`element: "${r}" is not found`);return e}const A={C3:130.81,C4:261.63,Db3:138.59,Db4:277.18,D3:146.83,D4:293.66,Eb3:155.56,Eb4:311.13,E3:164.81,E4:329.63,F3:174.61,F4:349.23,Gb3:185,Gb4:369.99,G3:196,G4:392,Ab3:207.65,Ab4:415.3,A3:220,A4:440,Bb3:233.08,Bb4:466.16,B3:246.94,B4:493.88};function L(r){let e=0;return{next:()=>e<r.length?{value:r[e++],done:!1}:{value:r[e],done:!0},getIndex:()=>e,setIndex:s=>e=s}}function D(){const r=new AudioContext;let e,s=!0,a=100,t,o="square",c;function g(){const n=r.createOscillator();return o=="custom"?n.setPeriodicWave(c):n.type=o,n.connect(r.destination),n}function f(n,l,d){if(s)return;e=g();const E=d?r.currentTime+d:r.currentTime,G=60/a*l,m=t.next();if(b.value=String(t.getIndex()),n=="-"){f(...m.value,G);return}e.frequency.value=A[n],e.start(E),e.onended=()=>{m.done||f(...m.value)},e.stop(E+G)}return{init:n=>{b.value="0",b.max=String(n.length),t=L(n)},start:()=>{const n=t.next();n.done||(s=!1,f(...n.value))},stop:()=>{s=!0,e.stop()},setIndex:n=>{t.setIndex(n)},setBpm:n=>{a=n},setWaveForm:n=>{if(o=n,n=="custom"){const l=new Float32Array([0,0,1,0,1]),d=new Float32Array(l.length);c=r.createPeriodicWave(d,l)}}}}const i=D(),v=[["G3",1],["G3",1],["G3",1],["Eb3",3/4],["Bb3",1/4],["G3",1],["Eb3",3/4],["Bb3",1/4],["G3",2],["D4",1],["D4",1],["D4",1],["Eb4",3/4],["Bb3",1/4],["Gb3",1],["Eb3",3/4],["Bb3",1/4],["G3",2],["G4",1],["G3",3/4],["G3",1/4],["G4",1],["Gb4",3/4],["F4",1/4],["E4",1/4],["Eb4",1/4],["E4",1/2],["-",1/2],["Ab3",1/2],["Db4",1],["C4",3/4],["B3",1/4],["Bb3",1/4],["A3",1/4],["Bb3",1/2],["-",1/2],["Eb3",1/2],["Gb3",1],["Eb3",3/4],["Gb3",1/4],["Bb3",1],["G3",3/4],["Bb3",1/4],["D4",2],["G4",1],["G3",3/4],["G3",1/4],["G4",1],["Gb4",3/4],["F4",1/4],["E4",1/4],["Eb4",1/4],["E4",1/2],["-",1/2],["Ab3",1/2],["Db4",1],["C4",3/4],["B3",1/4],["Bb3",1/4],["A3",1/4],["Bb3",1/2],["-",1/2],["Eb3",1/2],["Gb3",1],["Eb3",3/4],["Bb3",1/4],["G3",1],["Eb3",3/4],["Bb3",1/4],["G3",2]];i.init(v);y.addEventListener("click",()=>i.start());h.addEventListener("click",()=>i.stop());x.addEventListener("click",()=>i.init(v));p.addEventListener("change",({currentTarget:r})=>{const e=Number(r.value);Number(p.min)<=e&&e<=Number(p.max)&&i.setBpm(e)});b.addEventListener("change",({currentTarget:r})=>{i.setIndex(r.value)});B.addEventListener("change",({currentTarget:r})=>{i.setWaveForm(r.value)});
